<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#0f172a">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <title>POS Kassir</title>
  <link rel="manifest" href="manifest.json">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/@ericblade/quagga2@1.8.4/dist/quagga.min.js"></script>
  <link rel="stylesheet" href="style.css">
  <style>
    .btn-income-mini {
      padding: 4px 10px;
      font-size: 12px;
      font-weight: 600;
      color: #059669;
      background: #ecfdf5;
      border: 1px solid #a7f3d0;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.2s;
    }
    .btn-income-mini:hover { background: #d1fae5; }
    
    .btn-stock-action {
      padding: 4px 8px;
      font-size: 14px;
      background: #f9fafb;
      border: 1px solid #e5e7eb;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.2s;
      line-height: 1;
    }
    .btn-stock-action:hover { background: #e5e7eb; }
    .btn-writeoff-sm:hover { background: #fef3c7; border-color: #fbbf24; }
    .btn-return-sm:hover { background: #ede9fe; border-color: #a78bfa; }
    
    /* –°—Ç–∏–ª–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞ –º–∞–≥–∞–∑–∏–Ω–∞ */
    .store-location-item:hover {
      background: #4b5563 !important;
      transform: translateX(4px);
    }
    .store-location-item.selected-store {
      background: linear-gradient(135deg, #10b981 0%, #059669 100%) !important;
      border-left: 4px solid #34d399;
    }
  </style>
</head>
<body>
  <!-- STATUS BAR -->
  <div class="status-bar" id="statusBar">
    <span class="status-dot"></span>
    <span class="status-text">Online</span>
  </div>

  <!-- TOP HEADER -->
  <header class="top-header">
    <div class="store-info">
      <span class="store-label">–ö–æ–º–ø–∞–Ω–∏—è:</span>
      <span class="store-name" id="companyName">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
      <span class="store-label" style="margin-left: 20px;">–ú–∞–≥–∞–∑–∏–Ω:</span>
      <span class="store-name" id="storeName" >–ù–µ –≤—ã–±—Ä–∞–Ω</span>
    </div>
    
    <div class="user-profile">
      <span class="user-name" id="userName">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</span>
      <button class="btn-logout" onclick="logout()">–í—ã—Ö–æ–¥</button>
    </div>
  </header>

  <!-- SIDEBAR -->
  <nav class="sidebar">
    <div class="sidebar-header">
      <div class="logo">
        <div class="logo-icon">K</div>
        <span class="logo-text">Kassir</span>
      </div>
    </div>
    <div class="nav-menu">
      <button class="nav-item active" data-section="trading" onclick="showSection('trading')">
        <svg class="nav-icon-svg" style="width:20px;height:20px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/>
          <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
        </svg>
        <span class="nav-label">–ö–∞—Å—Å–∞</span>
      </button>
      <button class="nav-item" data-section="products" onclick="showSection('products')">
        <svg class="nav-icon-svg" style="width:20px;height:20px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
        </svg>
        <span class="nav-label">–¢–æ–≤–∞—Ä—ã</span>
      </button>
      <button class="nav-item" data-section="suppliers" onclick="showSection('suppliers')">
        <svg class="nav-icon-svg" style="width:20px;height:20px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="1" y="3" width="15" height="13"/><polygon points="16 8 20 8 23 11 23 16 16 16 16 8"/>
          <circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/>
        </svg>
        <span class="nav-label">–ü–æ—Å—Ç–∞–≤—â–∏–∫–∏</span>
      </button>
      <button class="nav-item" data-section="clients" onclick="showSection('clients')">
        <svg class="nav-icon-svg" style="width:20px;height:20px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
          <circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
          <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
        </svg>
        <span class="nav-label">–ö–ª–∏–µ–Ω—Ç—ã</span>
      </button>
      <button class="nav-item" data-section="expenses" onclick="showSection('expenses')">
        <svg class="nav-icon-svg" style="width:20px;height:20px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
        </svg>
        <span class="nav-label">–†–∞—Å—Ö–æ–¥—ã</span>
      </button>
      <button class="nav-item" data-section="reports" onclick="showSection('reports')">
        <svg class="nav-icon-svg" style="width:20px;height:20px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/>
          <line x1="6" y1="20" x2="6" y2="14"/>
        </svg>
        <span class="nav-label">–û—Ç—á—ë—Ç—ã</span>
      </button>
      <button class="nav-item" data-section="money" onclick="showSection('money')">
        <svg class="nav-icon-svg" style="width:20px;height:20px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="1" y="4" width="22" height="16" rx="2" ry="2"/><line x1="1" y1="10" x2="23" y2="10"/>
        </svg>
        <span class="nav-label">–î–µ–Ω—å–≥–∏</span>
      </button>
      <button class="nav-item" data-section="settings" onclick="showSection('settings')">
        <svg class="nav-icon-svg" style="width:20px;height:20px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="3"/>
          <path d="M12 1v6m0 6v6M5.64 5.64l4.24 4.24m4.24 4.24l4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m4.24-4.24l4.24-4.24"/>
        </svg>
        <span class="nav-label">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
      </button>
    </div>
  </nav>

  <!-- MAIN CONTENT -->
  <main class="main-content">
    
    <!-- SECTION: TRADING (–¢–û–†–ì–û–í–õ–Ø) -->
    <section class="section active" id="section-trading">
      <div class="section-header">
        <h1 class="section-title">–¢–æ—Ä–≥–æ–≤–ª—è</h1>
      </div>

      <!-- –í–∫–ª–∞–¥–∫–∏ –æ–ø–µ—Ä–∞—Ü–∏–π -->
      <div class="trading-tabs">
        <button class="tab-btn active" data-tab="sale" onclick="switchTradingTab('sale')">–ü—Ä–æ–¥–∞–∂–∞</button>
        <button class="tab-btn" data-tab="return" onclick="switchTradingTab('return')">–í–æ–∑–≤—Ä–∞—Ç</button>
      </div>

      <div class="trading-grid">
        <!-- LEFT PANEL -->
        <div class="left-panel">
          
          <!-- TAB: SALE (–ü—Ä–æ–¥–∞–∂–∞) -->
          <div class="trading-tab-content active" id="tab-sale">
            <!-- –ü—Ä–æ–¥–∞–∂–∞ -->
            <div class="card">
              <div class="card-title">–ü—Ä–æ–¥–∞–∂–∞</div>
              <div class="search-box-modern" style="position:relative;display:flex;align-items:center;background:var(--bg-secondary);border:2px solid var(--border);border-radius:12px;padding:0 12px;margin-bottom:20px;transition:all 0.2s;">
                <svg style="width:20px;height:20px;color:var(--text-tertiary);flex-shrink:0;margin-right:8px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/>
                </svg>
                <input type="text" id="barcodeInput" placeholder="–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–∞ –∏–ª–∏ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ..." autofocus style="flex:1;padding:14px 0;background:transparent;border:none;font-size:15px;outline:none;">
                <button id="scanBarcodeBtn" onclick="openBarcodeScanner()" style="width:40px;height:40px;background:linear-gradient(135deg,#3b82f6,#2563eb);border:none;border-radius:8px;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all 0.2s;margin:0 4px;" title="–°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —à—Ç—Ä–∏—Ö–∫–æ–¥">
                  <svg style="width:22px;height:22px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                    <rect x="3" y="3" width="18" height="18" rx="2"/>
                    <path d="M9 3v18M15 3v18"/>
                  </svg>
                </button>
                <button id="clearSearchBtn" onclick="clearSearch()" style="display:none;width:32px;height:32px;background:rgba(0,0,0,0.05);border:none;border-radius:50%;color:var(--text-secondary);font-size:20px;cursor:pointer;margin-left:4px;">√ó</button>
              </div>
              <div id="productsList" class="products-grid"></div>
            </div>
          </div>

          <!-- TAB: RETURN (–í–æ–∑–≤—Ä–∞—Ç) -->
          <div class="trading-tab-content" id="tab-return">
            <!-- –í—ã–±—Ä–∞–Ω–Ω–∞—è –ø—Ä–æ–¥–∞–∂–∞ -->
            <div id="selectedSaleBanner" style="display:none;margin-bottom:16px;padding:14px 18px;background:rgba(139,92,246,0.12);border:1.5px solid rgba(139,92,246,0.35);border-radius:12px;">
              <div style="display:flex;justify-content:space-between;align-items:center;">
                <div>
                  <div style="font-size:11px;font-weight:700;letter-spacing:.06em;color:#a78bfa;text-transform:uppercase;margin-bottom:4px;">–í—ã–±—Ä–∞–Ω–∞ –ø—Ä–æ–¥–∞–∂–∞</div>
                  <div id="selectedSaleInfo" style="font-size:14px;font-weight:600;color:var(--text-primary);"></div>
                </div>
                <button onclick="clearSelectedSale()" style="padding:6px 12px;background:rgba(139,92,246,0.2);border:1px solid rgba(139,92,246,0.4);border-radius:8px;color:#a78bfa;font-size:12px;font-weight:600;cursor:pointer;">–°–º–µ–Ω–∏—Ç—å</button>
              </div>
            </div>

            <!-- –ù–∞–π—Ç–∏ –ø—Ä–æ–¥–∞–∂—É –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ -->
            <div class="card" id="returnSearchCard">
              <div class="card-title">–ù–∞–π—Ç–∏ –ø—Ä–æ–¥–∞–∂—É –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞</div>
              <div class="search-box">
                <input type="text" id="returnSearchInput" class="input" placeholder="–ü–æ–∏—Å–∫ –ø—Ä–æ–¥–∞–∂–∏..." oninput="searchRecentSales()">
              </div>
              <div id="returnSalesList" class="sales-list"></div>
            </div>
          </div>

        </div>

        <!-- RIGHT PANEL (—Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏ –∏ –≤–æ–∑–≤—Ä–∞—Ç–∞) -->
        <div class="right-panel" id="rightPanel">

          <!-- –ß–µ–∫ -->
          <div class="card">
            <div class="card-title">–ß–µ–∫</div>
            <div id="cart" class="cart-items"></div>
          </div>

          <!-- –ö–ª–∏–µ–Ω—Ç + –±–∞–ª–ª—ã –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ -->
          <div class="card" id="clientCard">
            <div class="card-title">–ö–ª–∏–µ–Ω—Ç</div>
            <div style="display:flex;gap:8px;margin-bottom:8px;">
              <select id="clientSelect" class="input" onchange="onClientSelect()" style="flex:1;">
                <option value="">–ë–µ–∑ –∫–ª–∏–µ–Ω—Ç–∞</option>
              </select>
              <button class="btn-secondary" onclick="openNewClientModal()" style="padding:8px 12px;white-space:nowrap;">‚ûï</button>
            </div>
            <div id="loyaltyInfo" style="display:none;padding:8px 12px;background:rgba(16,185,129,0.1);border:1px solid rgba(16,185,129,0.3);border-radius:8px;font-size:13px;color:#10b981;">
              –ë–∞–ª–ª—ã: <strong id="loyaltyPoints">0</strong>
            </div>
          </div>

          <!-- –ü—Ä–æ–º–æ–∫–æ–¥ + —Å–∫–∏–¥–∫–∞ –≤—Ä—É—á–Ω—É—é -->
          <div class="card" id="discountCard">
            <div class="card-title">–°–∫–∏–¥–∫–∞</div>

            <div class="form-group" style="margin-bottom:10px;">
              <label style="font-size:11px;color:var(--text-secondary);font-weight:600;letter-spacing:.05em;">–ü–†–û–ú–û–ö–û–î</label>
              <div style="display:flex;gap:8px;">
                <input type="text" id="promoCodeInput" class="input" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥" oninput="onPromoInput()" style="flex:1;text-transform:uppercase;">
                <button class="btn-secondary" onclick="applyPromoCode()" style="padding:8px 14px;white-space:nowrap;">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
              </div>
              <div id="promoResult" style="display:none;margin-top:6px;font-size:13px;padding:6px 10px;border-radius:6px;"></div>
            </div>

            <div style="display:flex;align-items:center;gap:8px;margin:10px 0;color:var(--text-secondary);font-size:12px;">
              <div style="flex:1;height:1px;background:var(--border);"></div>
              <span>–∏–ª–∏ —Å–∫–∏–¥–∫–∞ –≤—Ä—É—á–Ω—É—é</span>
              <div style="flex:1;height:1px;background:var(--border);"></div>
            </div>

            <div id="manualDiscountBlock">
              <div class="discount-inputs">
                <input type="number" id="discountPercent" class="input input-small" placeholder="%" min="0" max="100" oninput="calculateDiscount()">
                <span style="margin:0 8px;color:var(--text-secondary);">–∏–ª–∏</span>
                <input type="number" id="discountAmount" class="input input-small" placeholder="‚Ç∏" min="0" oninput="calculateDiscountReverse()">
              </div>
              <div class="discount-result" style="margin-top:6px;">–°–∫–∏–¥–∫–∞: <span id="discountResultText">0 ‚Ç∏</span></div>
            </div>
          </div>

          <!-- –°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã -->
          <div class="card">
            <div class="card-title">–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã</div>
            <div class="payment-buttons" id="paymentButtons"></div>
          </div>

          <!-- –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –æ–ø–µ—Ä–∞—Ü–∏–∏ -->
          <div class="form-group" style="margin-bottom:12px;">
            <label style="font-size:11px;color:var(--text-secondary);font-weight:600;letter-spacing:.05em;">–î–ê–¢–ê –ò –í–†–ï–ú–Ø –û–ü–ï–†–ê–¶–ò–ò</label>
            <input type="datetime-local" id="operationTimeInput" class="input" placeholder="–û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏">
          </div>

          <!-- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π -->
          <div class="form-group" style="margin-bottom:12px;">
            <label style="font-size:11px;color:var(--text-secondary);font-weight:600;letter-spacing:.05em;">–ö–û–ú–ú–ï–ù–¢–ê–†–ò–ô</label>
            <textarea id="commentInput" class="input" rows="2" placeholder="–ö–∞—Å—Å–∏—Ä, Halyk –∏ —Ç.–¥."></textarea>
          </div>

          <!-- –ò—Ç–æ–≥–æ -->
          <div class="total-card">
            <div>
              <div class="total-card-label">–ò—Ç–æ–≥–æ</div>
              <div class="total-card-count" id="cartItemsCount"></div>
              <div id="totalDiscountLine" style="display:none;font-size:12px;opacity:0.65;margin-top:2px;">–°–∫–∏–¥–∫–∞: <span id="totalDiscountValue">0 ‚Ç∏</span></div>
            </div>
            <span class="total-card-amount" id="totalAmount">0 ‚Ç∏</span>
          </div>

          <!-- –ö–Ω–æ–ø–∫–∞ –ü–†–û–î–ê–¢–¨ ‚Äî –∑–µ–ª—ë–Ω–∞—è -->
          <button class="btn-sell" id="actionBtn" data-action="–ü–†–û–î–ê–¢–¨" onclick="submitOperation()">–ü–†–û–î–ê–¢–¨</button>
        </div>
      </div>
    </section>

    <!-- SECTION: PRODUCTS -->
    <section class="section" id="section-products">
      <div class="section-header">
        <h1 class="section-title">–¢–æ–≤–∞—Ä—ã –∏ —Å–∫–ª–∞–¥</h1>
        <div style="display:flex;gap:8px;">
          <button class="btn-secondary" onclick="openNewProduct()">+ –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</button>
          <button class="btn-secondary" onclick="downloadExcelTemplate()" title="–°–∫–∞—á–∞—Ç—å —à–∞–±–ª–æ–Ω Excel">üìÑ Excel</button>
        </div>
      </div>

      <!-- –í–∫–ª–∞–¥–∫–∏ -->
      <div class="trading-tabs">
        <button class="tab-btn active" data-tab="catalog" onclick="switchProductsTab('catalog')">
          –¢–û–í–ê–†–´
        </button>
        <button class="tab-btn" data-tab="stock" onclick="switchProductsTab('stock')">
          –û–°–¢–ê–¢–ö–ò
        </button>
        <button class="tab-btn" data-tab="income" onclick="switchProductsTab('income')">
          –ü–†–ò–•–û–î
        </button>
        <button class="tab-btn" data-tab="transfer" onclick="switchProductsTab('transfer')">
          –ü–ï–†–ï–ú–ï–©–ï–ù–ò–ï
        </button>
        <button class="tab-btn" data-tab="warehouse" onclick="switchProductsTab('warehouse')">
          –û–°–ù–û–í–ù–û–ô –°–ö–õ–ê–î
        </button>
      </div>

      <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –≤–∫–ª–∞–¥–æ–∫ -->
      <div class="products-section-content">
        
        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <!-- TAB 1: –¢–û–í–ê–†–´ (–í–µ—Å—å –∫–∞—Ç–∞–ª–æ–≥) -->
        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div class="trading-tab-content active" id="tab-catalog">
          <div class="card">
            <div class="card-title">–ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤ –∏ —É—Å–ª—É–≥</div>
            
            <!-- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
            <div style="display:flex;gap:8px;margin-bottom:16px;flex-wrap:wrap;">
              <button class="btn-secondary" onclick="openNewProduct()" style="flex:1;min-width:140px;">
                + –¢–æ–≤–∞—Ä
              </button>
              <button class="btn-secondary" onclick="openNewService()" style="flex:1;min-width:140px;">
                + –£—Å–ª—É–≥–∞
              </button>
              <button class="btn-secondary" onclick="document.getElementById('excelUploadInput').click()" style="flex:1;min-width:140px;background:#dcfce7;color:#166534;border-color:#86efac;">
                üì• –ò–º–ø–æ—Ä—Ç Excel
              </button>
              <input type="file" id="excelUploadInput" accept=".xlsx,.xls" style="display:none;" onchange="handleExcelUpload(event)">
            </div>

            <!-- –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä—ã -->
            <div style="display:flex;gap:8px;margin-bottom:12px;align-items:center;flex-wrap:wrap;">
              <input type="text" id="catalogSearchInput" class="input" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é, –∞—Ä—Ç–∏–∫—É–ª—É, —à—Ç—Ä–∏—Ö–∫–æ–¥—É..." oninput="filterCatalogTable()" style="flex:1;min-width:250px;">
              <select id="catalogTypeFilter" class="input" style="width:140px;" onchange="filterCatalogTable()">
                <option value="">–í—Å–µ —Ç–∏–ø—ã</option>
                <option value="product">–¢–æ–≤–∞—Ä—ã</option>
                <option value="service">–£—Å–ª—É–≥–∏</option>
              </select>
            </div>

            <!-- –¢–∞–±–ª–∏—Ü–∞ –∫–∞—Ç–∞–ª–æ–≥–∞ -->
            <div id="catalogTable" class="products-table"></div>
          </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <!-- TAB 2: –û–°–¢–ê–¢–ö–ò (–¢–µ–∫—É—â–∏–µ –æ—Å—Ç–∞—Ç–∫–∏ –Ω–∞ —Å–∫–ª–∞–¥–µ) -->
        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div class="trading-tab-content" id="tab-stock">
          <div class="card">
            <div class="card-title">–¢–µ–∫—É—â–∏–µ –æ—Å—Ç–∞—Ç–∫–∏ –Ω–∞ —Å–∫–ª–∞–¥–µ</div>
            
            <!-- –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä—ã -->
            <div style="display:flex;gap:8px;margin-bottom:12px;align-items:center;flex-wrap:wrap;">
              <input type="text" id="stockSearchInput" class="input" placeholder="üîç –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–∞..." oninput="filterStockTable()" style="flex:1;min-width:200px;">
              <select id="stockTypeFilter" class="input" style="width:140px;" onchange="filterStockTable()">
                <option value="">–í—Å–µ —Ç–∏–ø—ã</option>
                <option value="product">–¢–æ–≤–∞—Ä—ã</option>
                <option value="service">–£—Å–ª—É–≥–∏</option>
              </select>
              <select id="stockStatusFilter" class="input" style="width:160px;" onchange="filterStockTable()">
                <option value="">–í—Å–µ –æ—Å—Ç–∞—Ç–∫–∏</option>
                <option value="low">‚ö†Ô∏è –ú–∞–ª–æ (&lt; 2 —à—Ç)</option>
                <option value="zero">üî¥ –ù–µ—Ç –Ω–∞ —Å–∫–ª–∞–¥–µ</option>
                <option value="ok">‚úÖ –í –Ω–∞–ª–∏—á–∏–∏</option>
              </select>
            </div>

            <!-- –¢–∞–±–ª–∏—Ü–∞ –æ—Å—Ç–∞—Ç–∫–æ–≤ -->
            <div id="stockTable" class="products-table"></div>
          </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <!-- TAB 3: –ü–†–ò–•–û–î (–û–ø—Ä–∏—Ö–æ–¥–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞) -->
        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div class="trading-tab-content" id="tab-income">
          <div class="card">
            <div class="card-title">–ü—Ä–∏—Ö–æ–¥ —Ç–æ–≤–∞—Ä–∞ –Ω–∞ —Å–∫–ª–∞–¥</div>
            
            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å -->
            <div style="padding:0 0 16px 0;margin-bottom:16px;">
              <div style="display:flex;align-items:center;gap:12px;margin-bottom:8px;">
                <div>
                  <div style="font-weight:600;color:#e2e8f0;font-size:15px;">–û–ø—Ä–∏—Ö–æ–¥–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞</div>
                  <div style="font-size:13px;color:#94a3b8;margin-top:2px;">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ–≤–∞—Ä –∏–∑ —Å–ø–∏—Å–∫–∞ –∏ —É–∫–∞–∂–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–ª—è –ø—Ä–∏—Ö–æ–¥–∞ –Ω–∞ —Å–∫–ª–∞–¥</div>
                </div>
              </div>
            </div>

            <!-- –ü–æ–∏—Å–∫ -->
            <input type="text" id="incomeSearchInput" class="input" placeholder="üîç –ù–∞–π—Ç–∏ —Ç–æ–≤–∞—Ä –¥–ª—è –ø—Ä–∏—Ö–æ–¥–∞..." oninput="filterIncomeProducts()" style="margin-bottom:12px;">
            
            <!-- –¢–∞–±–ª–∏—Ü–∞ —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –ø—Ä–∏—Ö–æ–¥–∞ -->
            <div id="incomeProductsTable" class="products-table"></div>
          </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <!-- TAB 4: –ü–ï–†–ï–ú–ï–©–ï–ù–ò–ï (–ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –º–µ–∂–¥—É –ª–æ–∫–∞—Ü–∏—è–º–∏) -->
        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div class="trading-tab-content" id="tab-transfer">
          <div class="card">
            <div class="card-title">üîÑ –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –º–µ–∂–¥—É –ª–æ–∫–∞—Ü–∏—è–º–∏</div>
            
            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å -->
            <div style="padding:0 0 20px 0;margin-bottom:20px;">
              <div>
                <div style="font-weight:600;color:#e2e8f0;font-size:15px;">–ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤</div>
                <div style="font-size:13px;color:#94a3b8;margin-top:2px;">–í—ã–±–µ—Ä–∏—Ç–µ –ª–æ–∫–∞—Ü–∏–∏ –∏ –æ—Ç–º–µ—Ç—å—Ç–µ —Ç–æ–≤–∞—Ä—ã –¥–ª—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è</div>
              </div>
            </div>

            <!-- –ë–ª–æ–∫ –≤—ã–±–æ—Ä–∞ –ª–æ–∫–∞—Ü–∏–π -->
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:20px;">
              <div>
                <label style="display:block;margin-bottom:8px;font-weight:600;font-size:14px;color:#e2e8f0;">–û—Ç–∫—É–¥–∞</label>
                <select id="transferSourceSelect" class="input" style="width:100%;">
                  <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ª–æ–∫–∞—Ü–∏—é...</option>
                </select>
                <div id="transferSourceBalance" style="margin-top:6px;font-size:12px;color:#94a3b8;"></div>
              </div>
              <div>
                <label style="display:block;margin-bottom:8px;font-weight:600;font-size:14px;color:#e2e8f0;">–ö—É–¥–∞</label>
                <select id="transferDestSelect" class="input" style="width:100%;">
                  <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ª–æ–∫–∞—Ü–∏—é...</option>
                </select>
              </div>
            </div>

            <!-- –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä—ã -->
            <div style="display:flex;gap:8px;margin-bottom:12px;align-items:center;">
              <input type="text" id="transferSearchInput" class="input" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é, –∞—Ä—Ç–∏–∫—É–ª—É..." style="flex:1;">
              <button id="transferSelectAllBtn" class="btn-secondary" style="white-space:nowrap;display:none;">
                ‚òë –í—ã–±—Ä–∞—Ç—å –≤—Å—ë
              </button>
              <button id="transferDeselectAllBtn" class="btn-secondary" style="white-space:nowrap;display:none;">
                ‚òê –°–Ω—è—Ç—å –≤—Å—ë
              </button>
            </div>
            
            <!-- –¢–∞–±–ª–∏—Ü–∞ —Ç–æ–≤–∞—Ä–æ–≤ —Å —á–µ–∫–±–æ–∫—Å–∞–º–∏ -->
            <div id="transferProductsTable" style="margin-bottom:20px;">
              <div style="text-align:center;padding:40px;color:#9ca3af;font-size:14px;">
                –í—ã–±–µ—Ä–∏—Ç–µ –ª–æ–∫–∞—Ü–∏—é "–û—Ç–∫—É–¥–∞" –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤
              </div>
            </div>
            
            <!-- –ë–ª–æ–∫ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ -->
            <div id="transferSelectedBlock" style="display:none;background:rgba(34, 197, 94, 0.05);border-radius:10px;padding:16px;margin-bottom:16px;">
              <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;">
                <div style="font-weight:700;font-size:15px;color:#22c55e;">–í—ã–±—Ä–∞–Ω–æ –¥–ª—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è</div>
                <button id="transferClearSelectedBtn" class="btn-secondary" style="padding:6px 12px;font-size:13px;">
                  –û—á–∏—Å—Ç–∏—Ç—å
                </button>
              </div>
              <div id="transferSelectedList" style="display:grid;gap:8px;"></div>
              <div style="margin-top:12px;padding-top:12px;border-top:1px solid rgba(34, 197, 94, 0.3);font-weight:600;color:#22c55e;">
                –í—Å–µ–≥–æ: <span id="transferSelectedCount">0</span> —Ç–æ–≤–∞—Ä–æ–≤
              </div>
            </div>

            <!-- –ö–Ω–æ–ø–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è -->
            <button id="executeTransferBtn" class="btn-primary" style="width:100%;padding:14px;font-size:16px;font-weight:600;" disabled>
              –í—ã–ø–æ–ª–Ω–∏—Ç—å –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ
            </button>
          </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <!-- TAB 5: –û–°–ù–û–í–ù–û–ô –°–ö–õ–ê–î (–ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ —Å–∫–ª–∞–¥–µ) -->
        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div class="trading-tab-content" id="tab-warehouse">
          <div class="card">
            <div class="card-title">üì¶ –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫–ª–∞–¥</div>
            
            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å -->
            <div style="padding:0 0 16px 0;margin-bottom:16px;">
              <div>
                <div style="font-weight:600;color:#e2e8f0;font-size:15px;">–¢–æ–≤–∞—Ä—ã –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–º —Å–∫–ª–∞–¥–µ</div>
                <div style="font-size:13px;color:#94a3b8;margin-top:2px;">–ü—Ä–æ—Å–º–æ—Ç—Ä –æ—Å—Ç–∞—Ç–∫–æ–≤ —Ç–æ–≤–∞—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –Ω–∞ —Å–∫–ª–∞–¥–µ (–Ω–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –ø–æ –º–∞–≥–∞–∑–∏–Ω–∞–º)</div>
              </div>
            </div>

            <!-- –ü–æ–∏—Å–∫ -->
            <div style="display:flex;gap:8px;margin-bottom:12px;align-items:center;">
              <input type="text" id="warehouseSearchInput" class="input" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é, –∞—Ä—Ç–∏–∫—É–ª—É..." oninput="filterWarehouseProducts()" style="flex:1;">
            </div>
            
            <!-- –¢–∞–±–ª–∏—Ü–∞ —Ç–æ–≤–∞—Ä–æ–≤ —Å–∫–ª–∞–¥–∞ -->
            <div id="warehouseProductsTable" class="products-table">
              <div style="text-align:center;padding:40px;color:#9ca3af;font-size:14px;">
                –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤...
              </div>
            </div>
          </div>
        </div>

      </div>
    </section>

    <!-- SECTION: REPORTS -->
    <section class="section" id="section-reports">
      <div class="section-header">
        <h1 class="section-title">–û—Ç—á—ë—Ç—ã</h1>
      </div>

      <!-- –§–∏–ª—å—Ç—Ä –ø–µ—Ä–∏–æ–¥–∞ -->
      <div class="period-buttons" id="reportsPeriodBtns">
        <button class="period-btn active" onclick="changePeriod('day')">–î–µ–Ω—å</button>
        <button class="period-btn" onclick="changePeriod('week')">–ù–µ–¥–µ–ª—è</button>
        <button class="period-btn" onclick="changePeriod('month')">–ú–µ—Å—è—Ü</button>
      </div>

      <!-- –í–∫–ª–∞–¥–∫–∏ –æ—Ç—á—ë—Ç–æ–≤ -->
      <div style="display:flex;gap:4px;margin-bottom:16px;border-bottom:2px solid var(--border-color);overflow-x:auto;">
        <button class="report-tab-btn active" data-tab="cash"    onclick="switchReportTab('cash')"      style="padding:10px 18px;background:none;border:none;cursor:pointer;font-size:13px;font-weight:600;color:var(--primary-color);border-bottom:2px solid var(--primary-color);margin-bottom:-2px;white-space:nowrap;">–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏</button>
        <button class="report-tab-btn"        data-tab="sales"   onclick="switchReportTab('sales')"     style="padding:10px 18px;background:none;border:none;cursor:pointer;font-size:13px;font-weight:600;color:var(--text-secondary);border-bottom:2px solid transparent;margin-bottom:-2px;white-space:nowrap;">–ü—Ä–æ–¥–∞–∂–∏</button>
        <button class="report-tab-btn"        data-tab="returns" onclick="switchReportTab('returns')"   style="padding:10px 18px;background:none;border:none;cursor:pointer;font-size:13px;font-weight:600;color:var(--text-secondary);border-bottom:2px solid transparent;margin-bottom:-2px;white-space:nowrap;">–í–æ–∑–≤—Ä–∞—Ç—ã</button>
        <button class="report-tab-btn"        data-tab="stock"   onclick="switchReportTab('stock')"     style="padding:10px 18px;background:none;border:none;cursor:pointer;font-size:13px;font-weight:600;color:var(--text-secondary);border-bottom:2px solid transparent;margin-bottom:-2px;white-space:nowrap;">–î–≤–∏–∂–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤</button>
        <button class="report-tab-btn"        data-tab="balance" onclick="switchReportTab('balance')"   style="padding:10px 18px;background:none;border:none;cursor:pointer;font-size:13px;font-weight:600;color:var(--text-secondary);border-bottom:2px solid transparent;margin-bottom:-2px;white-space:nowrap;">–û—Å—Ç–∞—Ç–∫–∏</button>
      </div>

      <!-- –¢–ê–ë 1: –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (cash_transactions) -->
      <div id="reportTab-cash">
        <div class="card">
          <div class="stats-grid" style="margin-bottom:16px;">
            <div class="stat-card">
              <div class="stat-label">–ü—Ä–∏—Ö–æ–¥ –¥–µ–Ω–µ–≥</div>
              <div class="stat-value" id="rCashIncome" style="color:#10b981;">0 ‚Ç∏</div>
              <div class="stat-count" id="rCashIncomeCount">0 –æ–ø–µ—Ä–∞—Ü–∏–π</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">–†–∞—Å—Ö–æ–¥ –¥–µ–Ω–µ–≥</div>
              <div class="stat-value" id="rCashExpense" style="color:#ef4444;">0 ‚Ç∏</div>
              <div class="stat-count" id="rCashExpenseCount">0 –æ–ø–µ—Ä–∞—Ü–∏–π</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">–ë–∞–ª–∞–Ω—Å</div>
              <div class="stat-value" id="rCashBalance">0 ‚Ç∏</div>
            </div>
          </div>
          <div id="rCashTable"><div style="text-align:center;padding:20px;color:var(--text-secondary);">–ó–∞–≥—Ä—É–∑–∫–∞...</div></div>
        </div>
      </div>

      <!-- –¢–ê–ë 2: –ü—Ä–æ–¥–∞–∂–∏ (sales) -->
      <div id="reportTab-sales" style="display:none;">
        <div class="card">
          <div class="stats-grid" style="margin-bottom:16px;">
            <div class="stat-card">
              <div class="stat-label">–í—ã—Ä—É—á–∫–∞</div>
              <div class="stat-value" id="rSalesTotal">0 ‚Ç∏</div>
              <div class="stat-count" id="rSalesCount">0 –ø—Ä–æ–¥–∞–∂</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">–°—Ä–µ–¥–Ω–∏–π —á–µ–∫</div>
              <div class="stat-value" id="rSalesAvg">0 ‚Ç∏</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">–°–∫–∏–¥–∫–∏</div>
              <div class="stat-value" id="rSalesDiscount" style="color:#f59e0b;">0 ‚Ç∏</div>
            </div>
          </div>
          <div id="rSalesTable"><div style="text-align:center;padding:20px;color:var(--text-secondary);">–ó–∞–≥—Ä—É–∑–∫–∞...</div></div>
        </div>
      </div>

      <!-- –¢–ê–ë 2.5: –í–æ–∑–≤—Ä–∞—Ç—ã (refunded sales) -->
      <div id="reportTab-returns" style="display:none;">
        <div class="card">
          <div class="stats-grid" style="margin-bottom:16px;">
            <div class="stat-card">
              <div class="stat-label">–°—É–º–º–∞ –≤–æ–∑–≤—Ä–∞—Ç–æ–≤</div>
              <div class="stat-value" id="rReturnsTotal" style="color:#ef4444;">0 ‚Ç∏</div>
              <div class="stat-count" id="rReturnsCount">0 –≤–æ–∑–≤—Ä–∞—Ç–æ–≤</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">–°—Ä–µ–¥–Ω–∏–π –≤–æ–∑–≤—Ä–∞—Ç</div>
              <div class="stat-value" id="rReturnsAvg">0 ‚Ç∏</div>
            </div>
          </div>
          <div id="rReturnsTable"><div style="text-align:center;padding:20px;color:var(--text-secondary);">–ó–∞–≥—Ä—É–∑–∫–∞...</div></div>
        </div>
      </div>

      <!-- –¢–ê–ë 3: –î–≤–∏–∂–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ (stock_movements) -->
      <div id="reportTab-stock" style="display:none;">
        <div class="card">
          <div class="stats-grid" style="margin-bottom:16px;">
            <div class="stat-card">
              <div class="stat-label">–ü—Ä–∏—Ö–æ–¥ (—à—Ç)</div>
              <div class="stat-value" id="rStockIn" style="color:#10b981;">0</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">–†–∞—Å—Ö–æ–¥ (—à—Ç)</div>
              <div class="stat-value" id="rStockOut" style="color:#ef4444;">0</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">–û–ø–µ—Ä–∞—Ü–∏–π</div>
              <div class="stat-value" id="rStockOpsCount">0</div>
            </div>
          </div>
          <div id="rStockTable"><div style="text-align:center;padding:20px;color:var(--text-secondary);">–ó–∞–≥—Ä—É–∑–∫–∞...</div></div>
        </div>
      </div>

      <!-- –¢–ê–ë 4: –û—Å—Ç–∞—Ç–∫–∏ (product_balances) ‚Äî –ø–µ—Ä–∏–æ–¥ –Ω–µ –Ω—É–∂–µ–Ω -->
      <div id="reportTab-balance" style="display:none;">
        <div class="card">
          <div class="stats-grid" style="margin-bottom:16px;">
            <div class="stat-card">
              <div class="stat-label">–ü–æ–∑–∏—Ü–∏–π</div>
              <div class="stat-value" id="rBalanceItems">0</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">–í—Å–µ–≥–æ –µ–¥–∏–Ω–∏—Ü</div>
              <div class="stat-value" id="rBalanceQty">0</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">–ù–∞ —Å—É–º–º—É (—Å–µ–±–µ—Å—Ç.)</div>
              <div class="stat-value" id="rBalanceValue">0 ‚Ç∏</div>
            </div>
          </div>
          <div id="rBalanceTable"><div style="text-align:center;padding:20px;color:var(--text-secondary);">–ó–∞–≥—Ä—É–∑–∫–∞...</div></div>
        </div>
      </div>

    </section>

    <!-- SECTION: SUPPLIERS -->
    <section class="section" id="section-suppliers">
      <div class="section-header">
        <h1 class="section-title">–ü–æ—Å—Ç–∞–≤—â–∏–∫–∏</h1>
        <button class="btn-secondary" onclick="openNewSupplier()">+ –î–æ–±–∞–≤–∏—Ç—å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞</button>
      </div>
      <div class="card">
        <input type="text" id="supplierSearchInput" class="input" placeholder="–ü–æ–∏—Å–∫..." oninput="filterSuppliers()">
        <div id="suppliersTable" class="products-table"></div>
      </div>
    </section>

    <!-- SECTION: CLIENTS -->
    <section class="section" id="section-clients">
      <div class="section-header">
        <h1 class="section-title">–ö–ª–∏–µ–Ω—Ç—ã</h1>
        <button class="btn-secondary" onclick="openNewClient()">+ –î–æ–±–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞</button>
      </div>
      <div class="card">
        <input type="text" id="clientSearchInput" class="input" placeholder="–ü–æ–∏—Å–∫..." oninput="filterClients()">
        <div id="clientsTable" class="products-table"></div>
      </div>
    </section>

    <!-- SECTION: EXPENSES -->
    <section class="section" id="section-expenses">
      <div class="section-header">
        <h1 class="section-title">–†–∞—Å—Ö–æ–¥—ã</h1>
        <button class="btn-secondary" onclick="openNewExpense()">+ –î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—Ö–æ–¥</button>
      </div>
      
      <div class="period-buttons">
        <button class="period-btn active" onclick="changeExpensePeriod('day')">–î–µ–Ω—å</button>
        <button class="period-btn" onclick="changeExpensePeriod('week')">–ù–µ–¥–µ–ª—è</button>
        <button class="period-btn" onclick="changeExpensePeriod('month')">–ú–µ—Å—è—Ü</button>
      </div>

      <div class="card">
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-label">–í—Å–µ–≥–æ —Ä–∞—Å—Ö–æ–¥–æ–≤</div>
            <div class="stat-value" id="statExpenses">0 ‚Ç∏</div>
            <div class="stat-count" id="statExpensesCount">0 –æ–ø–µ—Ä–∞—Ü–∏–π</div>
          </div>
        </div>
        
        <div class="card-title" style="margin-top:24px;">–ò—Å—Ç–æ—Ä–∏—è —Ä–∞—Å—Ö–æ–¥–æ–≤</div>
        <div id="expensesHistory" class="sales-history"></div>
      </div>
    </section>

    <!-- SECTION: MONEY (P&L) -->
    <section class="section" id="section-money">
      <div class="section-header">
        <h1 class="section-title">–î–µ–Ω—å–≥–∏</h1>
        <div style="display:flex;gap:8px;">
          <button class="btn-secondary" onclick="openCashModal('in')" style="background:rgba(16,185,129,.15);border-color:#10b981;color:#10b981;">+ –í–Ω–µ—Å—Ç–∏</button>
          <button class="btn-secondary" onclick="openCashModal('out')" style="background:rgba(239,68,68,.15);border-color:#ef4444;color:#ef4444;">‚àí –°–Ω—è—Ç—å</button>
        </div>
      </div>

      <div class="period-buttons">
        <button class="period-btn active" onclick="changeMoneyPeriod('day')">–î–µ–Ω—å</button>
        <button class="period-btn" onclick="changeMoneyPeriod('week')">–ù–µ–¥–µ–ª—è</button>
        <button class="period-btn" onclick="changeMoneyPeriod('month')">–ú–µ—Å—è—Ü</button>
      </div>

      <!-- –¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å -->
      <div style="margin-bottom:24px;">
        <h3 style="font-size:14px;color:var(--text-secondary);text-transform:uppercase;letter-spacing:.05em;margin-bottom:12px;">üí∞ –¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å</h3>
        <div class="stats-grid" style="grid-template-columns:repeat(auto-fit,minmax(200px,1fr));">
          <div class="stat-card" style="background:linear-gradient(135deg,rgba(16,185,129,0.1) 0%,rgba(5,150,105,0.05) 100%);border-left:4px solid #10b981;">
            <div class="stat-label" style="color:#10b981;">üíµ –ù–∞–ª–∏—á–Ω—ã–µ</div>
            <div class="stat-value" id="balanceCash" style="color:#10b981;font-size:26px;font-weight:800;">0 ‚Ç∏</div>
          </div>
          <div class="stat-card" style="background:linear-gradient(135deg,rgba(59,130,246,0.1) 0%,rgba(37,99,235,0.05) 100%);border-left:4px solid #3b82f6;">
            <div class="stat-label" style="color:#3b82f6;">üí≥ –ë–µ–∑–Ω–∞–ª–∏—á–Ω—ã–µ</div>
            <div class="stat-value" id="balanceCard" style="color:#3b82f6;font-size:26px;font-weight:800;">0 ‚Ç∏</div>
          </div>
          <div class="stat-card" style="background:linear-gradient(135deg,rgba(139,92,246,0.1) 0%,rgba(124,58,237,0.05) 100%);border-left:4px solid #8b5cf6;">
            <div class="stat-label" style="color:#8b5cf6;">üíº –í—Å–µ–≥–æ</div>
            <div class="stat-value" id="balanceTotal" style="color:#8b5cf6;font-size:26px;font-weight:800;">0 ‚Ç∏</div>
          </div>
        </div>
      </div>

      <!-- –ö–ê–†—Ç–æ—á–∫–∏-—Å–≤–æ–¥–∫–∞ -->
      <div class="stats-grid" style="grid-template-columns:repeat(auto-fit,minmax(160px,1fr));">
        <div class="stat-card" style="border-left:4px solid #10b981;">
          <div class="stat-label">–í—ã—Ä—É—á–∫–∞</div>
          <div class="stat-value" id="mRevenue" style="color:#10b981;font-size:22px;">0 ‚Ç∏</div>
          <div class="stat-count" id="mRevenueCount">0 –ø—Ä–æ–¥–∞–∂</div>
        </div>
        <div class="stat-card" style="border-left:4px solid #ef4444;">
          <div class="stat-label">–†–∞—Å—Ö–æ–¥—ã</div>
          <div class="stat-value" id="mExpenses" style="color:#ef4444;font-size:22px;">0 ‚Ç∏</div>
          <div class="stat-count" id="mExpensesCount">0 –æ–ø–µ—Ä–∞—Ü–∏–π</div>
        </div>
        <div class="stat-card" style="border-left:4px solid #f59e0b;">
          <div class="stat-label">–°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å</div>
          <div class="stat-value" id="mCost" style="color:#f59e0b;font-size:22px;">0 ‚Ç∏</div>
        </div>
        <div class="stat-card" style="border-left:4px solid #3b82f6;">
          <div class="stat-label">–ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å</div>
          <div class="stat-value" id="mNet" style="font-size:22px;">0 ‚Ç∏</div>
        </div>
      </div>

      <!-- P&L —Ç–∞–±–ª–∏—Ü–∞ -->
      <div class="card" style="margin-bottom:16px;">
        <h3 style="margin-bottom:16px;font-size:15px;color:var(--text-secondary);text-transform:uppercase;letter-spacing:.05em;">–ü—Ä–∏–±—ã–ª–∏ –∏ —É–±—ã—Ç–∫–∏</h3>
        <div class="pl-table">
          <div class="pl-row pl-header"><div>–°—Ç–∞—Ç—å—è</div><div>–°—É–º–º–∞</div></div>
          <div class="pl-row pl-revenue">
            <div><strong>–í—ã—Ä—É—á–∫–∞</strong></div>
            <div><strong id="plRevenue">0 ‚Ç∏</strong></div>
          </div>
          <div class="pl-row">
            <div style="padding-left:20px;color:var(--text-secondary);">–°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å –ø—Ä–æ–¥–∞–∂</div>
            <div id="plCost" style="color:#f59e0b;">0 ‚Ç∏</div>
          </div>
          <div class="pl-row pl-gross">
            <div><strong>–í–∞–ª–æ–≤–∞—è –ø—Ä–∏–±—ã–ª—å</strong></div>
            <div><strong id="plGross">0 ‚Ç∏</strong></div>
          </div>
          <div class="pl-row pl-section">
            <div><strong>üìâ –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã</strong></div>
            <div><strong id="plExpenses">0 ‚Ç∏</strong></div>
          </div>
          <div class="pl-row">
            <div style="padding-left:20px;color:var(--text-secondary);">–°–ø–∏—Å–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤</div>
            <div id="plWriteoff">0 ‚Ç∏</div>
          </div>
          <div id="plExpenseCats"></div>
          <div class="pl-row pl-operating">
            <div><strong>–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è –ø—Ä–∏–±—ã–ª—å</strong></div>
            <div><strong id="plOperating">0 ‚Ç∏</strong></div>
          </div>
          <div class="pl-net pl-row">
            <div><strong>üèÜ –ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å</strong></div>
            <div><strong id="plNet">0 ‚Ç∏</strong></div>
          </div>
        </div>
      </div>

      <!-- –ì—Ä–∞—Ñ–∏–∫ –ø–æ –¥–Ω—è–º -->
      <div class="card" id="moneyChartCard" style="display:none;">
        <h3 style="margin-bottom:16px;font-size:15px;color:var(--text-secondary);text-transform:uppercase;letter-spacing:.05em;">–î–∏–Ω–∞–º–∏–∫–∞ –ø–æ –¥–Ω—è–º</h3>
        <div id="moneyChart" style="overflow-x:auto;"></div>
      </div>

    </section>

    <!-- SECTION: SETTINGS -->
    <section class="section" id="section-settings">
      <div class="section-header">
        <h1 class="section-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h1>
      </div>

      <!-- –í–∫–ª–∞–¥–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
      <div class="trading-tabs" style="margin-bottom:20px;">
        <button class="tab-btn active" data-tab="set-company"   onclick="switchSettingsTab('set-company')">üè¢ –ö–æ–º–ø–∞–Ω–∏—è</button>
        <button class="tab-btn"        data-tab="set-staff"     onclick="switchSettingsTab('set-staff')">–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</button>
        <button class="tab-btn"        data-tab="set-payments"  onclick="switchSettingsTab('set-payments')">–û–ø–ª–∞—Ç–∞</button>
        <button class="tab-btn"        data-tab="set-promos"    onclick="switchSettingsTab('set-promos')">üéüÔ∏è –ü—Ä–æ–º–æ–∫–æ–¥—ã</button>
        <button class="tab-btn"        data-tab="set-expenses"  onclick="switchSettingsTab('set-expenses')">üè∑Ô∏è –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ä–∞—Å—Ö–æ–¥–æ–≤</button>
        <button class="tab-btn"        data-tab="set-system"    onclick="switchSettingsTab('set-system')">–°–∏—Å—Ç–µ–º–∞</button>
      </div>

      <!-- –¢–ê–ë: –ö–û–ú–ü–ê–ù–ò–Ø -->
      <div class="trading-tab-content active" id="tab-set-company">
        <div class="card">
          <div class="card-title">–ö–æ–º–ø–∞–Ω–∏—è</div>
          <div class="form-group">
            <label class="label">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏</label>
            <div style="display:flex;gap:8px;">
              <input type="text" id="settingCompanyName" class="input" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏" style="flex:1;">
              <button class="btn-secondary" onclick="saveCompanyName()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
          </div>
        </div>

        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;">
            <div class="card-title" style="margin-bottom:0;">–¢–æ—Ä–≥–æ–≤—ã–µ —Ç–æ—á–∫–∏</div>
            <button class="btn-secondary" onclick="openNewStoreModal()">+ –î–æ–±–∞–≤–∏—Ç—å</button>
          </div>
          <div id="storeLocationsList"></div>
        </div>

        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;">
            <div class="card-title" style="margin-bottom:0;">–°–∫–ª–∞–¥—ã</div>
            <button class="btn-secondary" onclick="openNewWarehouseModal()">+ –î–æ–±–∞–≤–∏—Ç—å</button>
          </div>
          <div id="warehousesList"></div>
        </div>
      </div>

      <!-- –¢–ê–ë: –°–û–¢–†–£–î–ù–ò–ö–ò -->
      <div class="trading-tab-content" id="tab-set-staff">
        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;">
            <div class="card-title" style="margin-bottom:0;">–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</div>
            <button class="btn-secondary" onclick="openInviteModal()">+ –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å</button>
          </div>
          <div id="staffList"></div>
        </div>
      </div>

      <!-- –¢–ê–ë: –ú–ï–¢–û–î–´ –û–ü–õ–ê–¢–´ -->
      <div class="trading-tab-content" id="tab-set-payments">
        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;">
            <div class="card-title" style="margin-bottom:0;">–ú–µ—Ç–æ–¥—ã –æ–ø–ª–∞—Ç—ã</div>
            <button class="btn-secondary" onclick="openNewPaymentMethodModal()">+ –î–æ–±–∞–≤–∏—Ç—å</button>
          </div>
          <div id="paymentMethodsList"></div>
        </div>
      </div>

      <!-- –¢–ê–ë: –ü–†–û–ú–û–ö–û–î–´ -->
      <div class="trading-tab-content" id="tab-set-promos">
        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;">
            <div class="card-title" style="margin-bottom:0;">–ü—Ä–æ–º–æ–∫–æ–¥—ã</div>
            <button class="btn-secondary" onclick="openNewPromoModal()">+ –°–æ–∑–¥–∞—Ç—å</button>
          </div>
          <div id="promoCodesList"></div>
        </div>
      </div>

      <!-- –¢–ê–ë: –ö–ê–¢–ï–ì–û–†–ò–ò –†–ê–°–•–û–î–û–í -->
      <div class="trading-tab-content" id="tab-set-expenses">
        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;">
            <div class="card-title" style="margin-bottom:0;">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ä–∞—Å—Ö–æ–¥–æ–≤</div>
            <button class="btn-secondary" onclick="openNewExpenseCategoryModal()">+ –î–æ–±–∞–≤–∏—Ç—å</button>
          </div>
          <div id="expenseCategoriesList"></div>
        </div>
      </div>

      <!-- –¢–ê–ë: –°–ò–°–¢–ï–ú–ê -->
      <div class="trading-tab-content" id="tab-set-system">
        <div class="card">
          <div class="card-title">–°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</div>

          <div class="form-group">
            <label class="label">–ù–∞–ª–æ–≥–æ–≤–∞—è —Å—Ç–∞–≤–∫–∞ (%)</label>
            <input type="number" id="settingTaxRate" class="input" placeholder="0" min="0" max="100" style="max-width:200px;">
          </div>

          <div class="form-group">
            <label class="label">–ü–æ—Ä–æ–≥ –Ω–∏–∑–∫–æ–≥–æ –æ—Å—Ç–∞—Ç–∫–∞ (—à—Ç)</label>
            <input type="number" id="settingLowStock" class="input" placeholder="5" min="0" style="max-width:200px;">
          </div>

          <div class="form-group">
            <label class="label">–í–∞–ª—é—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é</label>
            <select id="settingCurrency" class="input" style="max-width:200px;">
              <option value="KZT">KZT ‚Äî –¢–µ–Ω–≥–µ</option>
              <option value="USD">USD ‚Äî –î–æ–ª–ª–∞—Ä</option>
              <option value="RUB">RUB ‚Äî –†—É–±–ª—å</option>
            </select>
          </div>

          <button class="btn-secondary" onclick="saveSystemSettings()" style="margin-top:8px;">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
        </div>
      </div>

    </section>

  </main>

  <!-- MODAL: –ù–û–í–´–ô –ü–†–û–ú–û–ö–û–î -->
  <div class="modal" id="promoModal">
    <div class="modal-content" style="max-width:440px;">
      <div class="modal-header">
        <h3 id="promoModalTitle">–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥</h3>
        <button class="modal-close" onclick="closeModal('promoModal')">√ó</button>
      </div>
      <div class="modal-body">
        <input type="hidden" id="editPromoId">
        <div class="form-group">
          <label class="label">–ö–æ–¥ *</label>
          <input type="text" id="promoCode" class="input" placeholder="–õ–ï–¢–û" style="text-transform:uppercase;">
        </div>
        <div class="form-group">
          <label class="label">–û–ø–∏—Å–∞–Ω–∏–µ</label>
          <input type="text" id="promoDescription" class="input" placeholder="–õ–µ—Ç–Ω—è—è —Å–∫–∏–¥–∫–∞">
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="label">–¢–∏–ø —Å–∫–∏–¥–∫–∏ *</label>
            <select id="promoDiscountType" class="input">
              <option value="percent">–ü—Ä–æ—Ü–µ–Ω—Ç (%)</option>
              <option value="fixed">–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è (‚Ç∏)</option>
            </select>
          </div>
          <div class="form-group">
            <label class="label">–†–∞–∑–º–µ—Ä —Å–∫–∏–¥–∫–∏ *</label>
            <input type="number" id="promoDiscountValue" class="input" placeholder="30" min="0">
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="label">–î–µ–π—Å—Ç–≤—É–µ—Ç —Å *</label>
            <input type="date" id="promoValidFrom" class="input">
          </div>
          <div class="form-group">
            <label class="label">–î–µ–π—Å—Ç–≤—É–µ—Ç –¥–æ *</label>
            <input type="date" id="promoValidUntil" class="input">
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="label">–ú–∏–Ω. —Å—É–º–º–∞ –ø–æ–∫—É–ø–∫–∏ (‚Ç∏)</label>
            <input type="number" id="promoMinAmount" class="input" placeholder="0" min="0">
          </div>
          <div class="form-group">
            <label class="label">–õ–∏–º–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π</label>
            <input type="number" id="promoUsageLimit" class="input" placeholder="–ë–µ–∑ –ª–∏–º–∏—Ç–∞" min="1">
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" onclick="closeModal('promoModal')">–û—Ç–º–µ–Ω–∞</button>
        <button class="btn-primary" onclick="savePromoCode()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </div>
  </div>

  <!-- MODAL: –¢–û–†–ì–û–í–ê–Ø –¢–û–ß–ö–ê -->
  <div class="modal" id="storeModal">
    <div class="modal-content" style="max-width:380px;">
      <div class="modal-header">
        <h3>–¢–æ—Ä–≥–æ–≤–∞—è —Ç–æ—á–∫–∞</h3>
        <button class="modal-close" onclick="closeModal('storeModal')">√ó</button>
      </div>
      <div class="modal-body">
        <input type="hidden" id="editStoreId">
        <div class="form-group">
          <label class="label">–ù–∞–∑–≤–∞–Ω–∏–µ *</label>
          <input type="text" id="storeName" class="input" placeholder="–û—Å–Ω–æ–≤–Ω–∞—è —Ç–æ—á–∫–∞">
        </div>
        <div class="form-group">
          <label class="label">–ê–¥—Ä–µ—Å</label>
          <input type="text" id="storeAddress" class="input" placeholder="–ê–¥—Ä–µ—Å (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)">
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" onclick="closeModal('storeModal')">–û—Ç–º–µ–Ω–∞</button>
        <button class="btn-primary" onclick="saveStoreLocation()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </div>
  </div>

  <!-- MODAL: –ü–†–ò–ì–õ–ê–®–ï–ù–ò–ï –°–û–¢–†–£–î–ù–ò–ö–ê -->
  <div class="modal" id="inviteModal">
    <div class="modal-content" style="max-width:380px;">
      <div class="modal-header">
        <h3>–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</h3>
        <button class="modal-close" onclick="closeModal('inviteModal')">√ó</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="label">Email *</label>
          <input type="email" id="inviteEmail" class="input" placeholder="email@example.com">
        </div>
        <div class="form-group">
          <label class="label">–†–æ–ª—å *</label>
          <select id="inviteRole" class="input">
            <option value="cashier">–ö–∞—Å—Å–∏—Ä</option>
            <option value="manager">–ú–µ–Ω–µ–¥–∂–µ—Ä</option>
            <option value="warehouse">–ö–ª–∞–¥–æ–≤—â–∏–∫</option>
            <option value="accountant">–ë—É—Ö–≥–∞–ª—Ç–µ—Ä</option>
            <option value="admin">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</option>
          </select>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" onclick="closeModal('inviteModal')">–û—Ç–º–µ–Ω–∞</button>
        <button class="btn-primary" onclick="sendInvite()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ</button>
      </div>
    </div>
  </div>

  <!-- MODAL: –ù–û–í–´–ô –ú–ï–¢–û–î –û–ü–õ–ê–¢–´ -->
  <div class="modal" id="paymentMethodModal">
    <div class="modal-content" style="max-width:360px;">
      <div class="modal-header">
        <h3>–ú–µ—Ç–æ–¥ –æ–ø–ª–∞—Ç—ã</h3>
        <button class="modal-close" onclick="closeModal('paymentMethodModal')">√ó</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="label">–ù–∞–∑–≤–∞–Ω–∏–µ *</label>
          <input type="text" id="newPaymentMethodName" class="input" placeholder="Kaspi, Halyk, –ù–∞–ª–∏—á–Ω—ã–µ...">
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" onclick="closeModal('paymentMethodModal')">–û—Ç–º–µ–Ω–∞</button>
        <button class="btn-primary" onclick="savePaymentMethod()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </div>
  </div>

  <!-- MODAL: –ö–ê–¢–ï–ì–û–†–ò–Ø –†–ê–°–•–û–î–û–í -->
  <div class="modal" id="expenseCategoryModal">
    <div class="modal-content" style="max-width:360px;">
      <div class="modal-header">
        <h3>–ö–∞—Ç–µ–≥–æ—Ä–∏—è —Ä–∞—Å—Ö–æ–¥–æ–≤</h3>
        <button class="modal-close" onclick="closeModal('expenseCategoryModal')">√ó</button>
      </div>
      <div class="modal-body">
        <input type="hidden" id="editExpenseCatId">
        <div class="form-group">
          <label class="label">–ù–∞–∑–≤–∞–Ω–∏–µ *</label>
          <input type="text" id="expenseCatName" class="input" placeholder="–ê—Ä–µ–Ω–¥–∞, –ó–∞—Ä–ø–ª–∞—Ç–∞...">
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" onclick="closeModal('expenseCategoryModal')">–û—Ç–º–µ–Ω–∞</button>
        <button class="btn-primary" onclick="saveExpenseCategory()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </div>
  </div>

  <!-- MODAL: –í–ù–ï–°–¢–ò / –°–ù–Ø–¢–¨ –î–ï–ù–¨–ì–ò -->
  <div class="modal" id="cashModal">
    <div class="modal-content" style="max-width:360px;">
      <div class="modal-header">
        <h3 id="cashModalTitle">–í–Ω–µ—Å—Ç–∏ –¥–µ–Ω—å–≥–∏</h3>
        <button class="modal-close" onclick="closeModal('cashModal')">√ó</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="label">–°—É–º–º–∞ *</label>
          <input type="number" id="cashModalAmount" class="input" placeholder="0" min="1" step="any">
        </div>
        <div class="form-group">
          <label class="label">–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã *</label>
          <select id="cashModalPayment" class="input"></select>
        </div>
        <div class="form-group">
          <label class="label">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</label>
          <input type="text" id="cashModalComment" class="input" placeholder="–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ">
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" onclick="closeModal('cashModal')">–û—Ç–º–µ–Ω–∞</button>
        <button class="btn-primary" id="cashModalSubmit" onclick="saveCashOperation()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </div>
  </div>

  <!-- TOAST -->
  <div class="toast" id="toast"></div>

  <!-- MODAL: NEW PRODUCT -->
  <div class="modal" id="modalNewProduct">
    <div class="modal-content">
      <div class="modal-header">
        <h3>–ù–æ–≤—ã–π —Ç–æ–≤–∞—Ä</h3>
        <button class="modal-close" onclick="closeModal('modalNewProduct')">√ó</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="label">–ù–∞–∑–≤–∞–Ω–∏–µ *</label>
          <input type="text" id="newProductName" class="input" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞">
        </div>
        <div class="form-group">
          <label class="label">–ê—Ä—Ç–∏–∫—É–ª (SKU) *</label>
          <input type="text" id="newProductSKU" class="input" placeholder="–ê—Ä—Ç–∏–∫—É–ª">
        </div>
        <div class="form-group">
          <label class="label">–®—Ç—Ä–∏—Ö–∫–æ–¥</label>
          <input type="text" id="newProductBarcode" class="input" placeholder="–®—Ç—Ä–∏—Ö–∫–æ–¥ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)">
        </div>
<div class="form-group">
  <label class="label">–¢–∏–ø</label>
  <div style="display:flex;gap:16px;margin-top:8px;">
    <label style="display:flex;align-items:center;gap:8px;cursor:pointer;">
      <input type="radio" name="productType" id="productTypeProduct" value="product" checked onchange="toggleProductQuantityField()">
      <span>–¢–æ–≤–∞—Ä</span>
    </label>
    <label style="display:flex;align-items:center;gap:8px;cursor:pointer;">
      <input type="radio" name="productType" id="productTypeService" value="service" onchange="toggleProductQuantityField()">
      <span>–£—Å–ª—É–≥–∞</span>
    </label>
  </div>
</div>
        <div class="form-row">
          <div class="form-group">
            <label class="label">–¶–µ–Ω–∞ –ø–æ–∫—É–ø–∫–∏</label>
            <input type="number" id="newProductPurchase" class="input" placeholder="0" min="0">
          </div>
          <div class="form-group">
            <label class="label">–¶–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏ *</label>
            <input type="number" id="newProductSale" class="input" placeholder="0" min="0">
          </div>
        </div>
        <div class="form-group" id="newProductQuantityGroup">
          <label class="label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∏—Ö–æ–¥–∞</label>
          <input type="number" id="newProductQuantity" class="input" placeholder="0 (–±–µ–∑ –ø—Ä–∏—Ö–æ–¥–∞)" min="0" step="1"
            oninput="document.getElementById('btnSaveNewProduct').textContent = (parseInt(this.value) > 0) ? '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –æ–ø—Ä–∏—Ö–æ–¥–æ–≤–∞—Ç—å' : '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å'">
          <small style="color: #6b7280; font-size: 12px; margin-top: 4px; display: block;">
            –û—Å—Ç–∞–≤—å—Ç–µ 0 –µ—Å–ª–∏ –Ω–µ –Ω—É–∂–Ω–æ –æ–ø—Ä–∏—Ö–æ–¥–æ–≤–∞—Ç—å —Ç–æ–≤–∞—Ä —Å–µ–π—á–∞—Å
          </small>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" onclick="closeModal('modalNewProduct')">–û—Ç–º–µ–Ω–∞</button>
        <button class="btn-primary" id="btnSaveNewProduct" onclick="saveNewProduct()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </div>
  </div>

  <!-- MODAL: NEW PRODUCT INCOME -->
  <div class="modal" id="modalNewProductIncome">
    <div class="modal-content">
      <div class="modal-header">
        <h3>–ù–æ–≤—ã–π —Ç–æ–≤–∞—Ä (–ø—Ä–∏—Ö–æ–¥)</h3>
        <button class="modal-close" onclick="closeModal('modalNewProductIncome')">√ó</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="label">–ù–∞–∑–≤–∞–Ω–∏–µ *</label>
          <input type="text" id="incomeProductName" class="input" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞">
        </div>
        <div class="form-group">
          <label class="label">–ê—Ä—Ç–∏–∫—É–ª (SKU) *</label>
          <input type="text" id="incomeProductSKU" class="input" placeholder="–ê—Ä—Ç–∏–∫—É–ª">
        </div>
        <div class="form-group">
          <label class="label">–®—Ç—Ä–∏—Ö–∫–æ–¥</label>
          <input type="text" id="incomeProductBarcode" class="input" placeholder="–®—Ç—Ä–∏—Ö–∫–æ–¥ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)">
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="label">–°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å *</label>
            <input type="number" id="incomeProductCost" class="input" placeholder="0" min="0" step="0.01">
          </div>
          <div class="form-group">
            <label class="label">–¶–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏ *</label>
            <input type="number" id="incomeProductPrice" class="input" placeholder="0" min="0" step="0.01">
          </div>
        </div>
        <div class="form-group">
          <label class="label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∏—Ö–æ–¥–∞ *</label>
          <input type="number" id="incomeProductQuantity" class="input" placeholder="0" min="1" step="1">
        </div>

        <!-- –í–´–ë–û–† –ü–û–°–¢–ê–í–©–ò–ö–ê -->
        <div class="form-group">
          <label class="label">–ü–æ—Å—Ç–∞–≤—â–∏–∫</label>
          <div style="display:flex;gap:8px;">
            <select id="incomeProductSupplier" class="input supplier-select" style="flex:1;">
              <option value="">‚Äî –ë–µ–∑ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ ‚Äî</option>
            </select>
            <button type="button" class="btn-secondary" onclick="openNewSupplierInline()" style="white-space:nowrap;padding:0 12px;">+ –ù–æ–≤—ã–π</button>
          </div>
        </div>
        
        <!-- –ë–õ–û–ö –û–ü–õ–ê–¢–´ –ü–û–°–¢–ê–í–©–ò–ö–£ -->
        <div class="form-group" style="margin-top: 20px; padding-top: 20px; border-top: 1px solid #e5e7eb;">
          <label style="display: flex; align-items: center; cursor: pointer; user-select: none;">
            <input 
              type="checkbox" 
              id="payToSupplier" 
              onchange="toggleSupplierPayment()"
              style="width: 18px; height: 18px; margin-right: 10px; cursor: pointer;"
            >
            <span style="font-weight: 500; color: #374151;">–û–ø–ª–∞—Ç–∏—Ç—å –ø–æ—Å—Ç–∞–≤—â–∏–∫—É —Å–µ–π—á–∞—Å</span>
          </label>
        </div>
        
        <!-- –í—ã–±–æ—Ä —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ —á–µ–∫–±–æ–∫—Å–∞) -->
        <div id="supplierPaymentBlock" style="display: none; margin-top: 12px; padding: 12px; background: #f9fafb; border-radius: 6px; border: 1px solid #e5e7eb;">
          <label class="label">–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã *</label>
          <select id="incomeSupplierPaymentMethod" class="input">
            <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∏–∑ PAYMENT_METHODS -->
          </select>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" onclick="closeModal('modalNewProductIncome')">–û—Ç–º–µ–Ω–∞</button>
        <button class="btn-primary" onclick="saveNewProductIncome()">–û–ø—Ä–∏—Ö–æ–¥–æ–≤–∞—Ç—å</button>
      </div>
    </div>
  </div>

  <!-- MODAL: NEW SERVICE INCOME -->
  <div class="modal" id="modalNewServiceIncome">
    <div class="modal-content">
      <div class="modal-header">
        <h3>–ù–æ–≤–∞—è —É—Å–ª—É–≥–∞</h3>
        <button class="modal-close" onclick="closeModal('modalNewServiceIncome')">√ó</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="label">–ù–∞–∑–≤–∞–Ω–∏–µ *</label>
          <input type="text" id="incomeServiceName" class="input" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —É—Å–ª—É–≥–∏">
        </div>
        <div class="form-group">
          <label class="label">–ê—Ä—Ç–∏–∫—É–ª (SKU) *</label>
          <input type="text" id="incomeServiceSKU" class="input" placeholder="–ê—Ä—Ç–∏–∫—É–ª">
        </div>
        <div class="form-group">
          <label class="label">–®—Ç—Ä–∏—Ö–∫–æ–¥</label>
          <input type="text" id="incomeServiceBarcode" class="input" placeholder="–®—Ç—Ä–∏—Ö–∫–æ–¥ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)">
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="label">–°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å *</label>
            <input type="number" id="incomeServiceCost" class="input" placeholder="0" min="0" step="0.01">
          </div>
          <div class="form-group">
            <label class="label">–¶–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏ *</label>
            <input type="number" id="incomeServicePrice" class="input" placeholder="0" min="0" step="0.01">
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" onclick="closeModal('modalNewServiceIncome')">–û—Ç–º–µ–Ω–∞</button>
        <button class="btn-primary" onclick="saveNewServiceIncome()">–î–æ–±–∞–≤–∏—Ç—å</button>
      </div>
    </div>
  </div>

  <!-- MODAL: NEW SUPPLIER -->
  <div class="modal" id="modalNewSupplier">
    <div class="modal-content">
      <div class="modal-header">
        <h3>–ù–æ–≤—ã–π –ø–æ—Å—Ç–∞–≤—â–∏–∫</h3>
        <button class="modal-close" onclick="closeModal('modalNewSupplier')">√ó</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="label">–ù–∞–∑–≤–∞–Ω–∏–µ *</label>
          <input type="text" id="newSupplierName" class="input" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏">
        </div>
        <div class="form-group">
          <label class="label">–ö–æ–Ω—Ç–∞–∫—Ç</label>
          <input type="text" id="newSupplierContact" class="input" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω –∏–ª–∏ email">
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" onclick="closeModal('modalNewSupplier')">–û—Ç–º–µ–Ω–∞</button>
        <button class="btn-primary" onclick="saveNewSupplier()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </div>
  </div>

  <!-- MODAL: NEW CLIENT -->
  <div class="modal" id="newClientModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="clientModalTitle">–ù–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç</h3>
        <button class="modal-close" onclick="closeModal('newClientModal')">√ó</button>
      </div>
      <div class="modal-body">
        <input type="hidden" id="editClientId">
        <div class="form-group">
          <label class="label">–ò–º—è *</label>
          <input type="text" id="newClientName" class="input" placeholder="–ò–º—è –∫–ª–∏–µ–Ω—Ç–∞">
        </div>
        <div class="form-group">
          <label class="label">–¢–µ–ª–µ—Ñ–æ–Ω</label>
          <input type="tel" id="newClientPhone" class="input" placeholder="+7 (___) ___-__-__">
        </div>
        <div class="form-group">
          <label class="label">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</label>
          <textarea id="newClientComment" class="input" rows="2" placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è"></textarea>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" onclick="closeModal('newClientModal')">–û—Ç–º–µ–Ω–∞</button>
        <button class="btn-primary" onclick="saveNewClient()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </div>
  </div>

  <!-- MODAL: SUPPLIER (—Å–æ–∑–¥–∞–Ω–∏–µ / —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ) -->
  <div class="modal" id="supplierModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="supplierModalTitle">–ù–æ–≤—ã–π –ø–æ—Å—Ç–∞–≤—â–∏–∫</h3>
        <button class="modal-close" onclick="closeModal('supplierModal')">√ó</button>
      </div>
      <div class="modal-body">
        <input type="hidden" id="editSupplierId">
        <div class="form-group">
          <label class="label">–ù–∞–∑–≤–∞–Ω–∏–µ *</label>
          <input type="text" id="supplierName" class="input" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ –∏–ª–∏ –§–ò–û">
        </div>
        <div class="form-group">
          <label class="label">–ö–æ–Ω—Ç–∞–∫—Ç (—Ç–µ–ª–µ—Ñ–æ–Ω / email)</label>
          <input type="text" id="supplierContact" class="input" placeholder="+7 (___) ___-__-__">
        </div>
        <div class="form-group">
          <label class="label">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</label>
          <textarea id="supplierComment" class="input" rows="2" placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è"></textarea>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" onclick="closeModal('supplierModal')">–û—Ç–º–µ–Ω–∞</button>
        <button class="btn-primary" onclick="saveSupplier()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </div>
  </div>

  <!-- MODAL: NEW EXPENSE -->
  <div class="modal" id="newExpenseModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>–ù–æ–≤—ã–π —Ä–∞—Å—Ö–æ–¥</h3>
        <button class="modal-close" onclick="closeModal('newExpenseModal')">√ó</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="label">–ö–∞—Ç–µ–≥–æ—Ä–∏—è *</label>
          <div style="display:flex;gap:8px;align-items:flex-start;">
            <select id="newExpenseCategory" class="input" onchange="toggleNewCategoryInput()" style="flex:1;">
              <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>
              <option value="rent">–ê—Ä–µ–Ω–¥–∞</option>
              <option value="salary">–ó–∞—Ä–ø–ª–∞—Ç–∞</option>
              <option value="marketing">–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥ –∏ —Ä–µ–∫–ª–∞–º–∞</option>
              <option value="utilities">–ö–æ–º–º—É–Ω–∞–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏</option>
              <option value="operations">–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã</option>
              <option value="taxes">–ù–∞–ª–æ–≥–∏ –∏ —Å–±–æ—Ä—ã</option>
              <option value="other">–ü—Ä–æ—á–∏–µ —Ä–∞—Å—Ö–æ–¥—ã</option>
              <option value="new">‚ûï –ù–æ–≤–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è</option>
            </select>
          </div>
        </div>
        <div class="form-group" id="newCategoryGroup" style="display:none;">
          <label class="label">–ù–∞–∑–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ *</label>
          <input type="text" id="newCategoryName" class="input" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ">
        </div>
        <div class="form-group">
          <label class="label">–°—É–º–º–∞ *</label>
          <input type="number" id="newExpenseAmount" class="input" placeholder="0" min="0" step="0.01">
        </div>
        <div class="form-group">
          <label class="label">–û–ø–∏—Å–∞–Ω–∏–µ</label>
          <textarea id="newExpenseDescription" class="input" rows="2" placeholder="–ß—Ç–æ –æ–ø–ª–∞—á–µ–Ω–æ"></textarea>
        </div>
        <div class="form-group">
          <label class="label">–î–∞—Ç–∞</label>
          <input type="date" id="newExpenseDate" class="input">
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" onclick="closeModal('newExpenseModal')">–û—Ç–º–µ–Ω–∞</button>
        <button class="btn-primary" onclick="saveNewExpense()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </div>
  </div>

  <!-- MODAL: QUICK STOCK ACTION (–°–ø–∏—Å–∞–Ω–∏–µ / –í–æ–∑–≤—Ä–∞—Ç –ø–æ—Å—Ç–∞–≤—â–∏–∫—É) -->
  <div class="modal" id="quickStockModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="quickStockModalTitle">–°–ø–∏—Å–∞–Ω–∏–µ</h3>
        <button class="modal-close" onclick="closeModal('quickStockModal')">√ó</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="label" id="quickStockProductLabel">–¢–æ–≤–∞—Ä</label>
          <div id="quickStockProductName" style="font-weight:600;font-size:15px;padding:10px;background:var(--bg-secondary,#1e293b);border-radius:8px;"></div>
        </div>
        <div class="form-group">
          <label class="label">–î–æ—Å—Ç—É–ø–Ω–æ: <span id="quickStockAvailable" style="color:var(--primary-color,#3b82f6);font-weight:600;"></span></label>
          <input type="number" id="quickStockQty" class="input" placeholder="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ" min="1" step="1">
        </div>
        <div class="form-group" id="quickStockReasonGroup">
          <label class="label" id="quickStockReasonLabel">–ü—Ä–∏—á–∏–Ω–∞ *</label>
          <input type="text" id="quickStockReason" class="input" placeholder="–£–∫–∞–∂–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É">
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" onclick="closeModal('quickStockModal')">–û—Ç–º–µ–Ω–∞</button>
        <button class="btn-primary" id="quickStockSubmitBtn" onclick="submitQuickStockModal()">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
      </div>
    </div>
  </div>

  <!-- trading-operations –≥—Ä—É–∑–∏—Ç—Å—è –ø–µ—Ä–≤—ã–º —á—Ç–æ–±—ã window.switchTradingTab –∏ –¥—Ä—É–≥–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±—ã–ª–∏ –≥–æ—Ç–æ–≤—ã –¥–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ script.js -->
  <script type="module" src="trading-operations.js"></script>
  <script type="module" src="excel-import.js"></script>
  <script type="module" src="settings.js"></script>
  <script type="module" src="script.js"></script>
  <script src="mobile-nav.js"></script>
  <script>
    // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Service Worker
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then(reg => console.log('‚úÖ Service Worker –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω'))
          .catch(err => console.log('‚ùå Service Worker –æ—à–∏–±–∫–∞:', err));
      });
    }
  </script>

  <!-- MODAL: EXCEL IMPORT PREVIEW -->
  <div class="modal" id="excelImportModal" style="display:none;">
    <div class="modal-content" style="max-width:900px;width:95%;max-height:90vh;display:flex;flex-direction:column;">
      <div class="modal-header">
        <h3 id="excelImportTitle">üì• –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ Excel</h3>
        <button class="modal-close" onclick="closeModal('excelImportModal')">√ó</button>
      </div>
      <div style="padding:16px 20px;border-bottom:1px solid var(--border-color);">
        <div id="excelImportStats" style="display:flex;gap:12px;flex-wrap:wrap;"></div>
      </div>
      <div style="overflow-y:auto;flex:1;padding:16px 20px;">
        <div id="excelImportPreview"></div>
      </div>
      <div style="padding:16px 20px;border-top:1px solid var(--border-color);display:flex;gap:10px;justify-content:flex-end;">
        <button class="btn-secondary" onclick="closeModal('excelImportModal')">–û—Ç–º–µ–Ω–∞</button>
        <button id="excelImportBtn" class="btn-primary" onclick="confirmExcelImport()" style="background:#166534;color:white;border:none;padding:10px 24px;border-radius:8px;font-weight:600;cursor:pointer;">
          –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ç–æ–≤–∞—Ä—ã
        </button>
      </div>
    </div>
  </div>


  <!-- MODAL: EDIT PRODUCT -->
  <div class="modal" id="editProductModal" style="display:none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3>‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–≤–∞—Ä</h3>
        <button class="modal-close" onclick="closeModal('editProductModal')">√ó</button>
      </div>
      <div class="modal-body">
        <input type="hidden" id="editProductId">
        <div class="form-group">
          <label class="label">–ù–∞–∑–≤–∞–Ω–∏–µ *</label>
          <input type="text" id="editProductName" class="input" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞">
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="label">–ê—Ä—Ç–∏–∫—É–ª</label>
            <input type="text" id="editProductSku" class="input" placeholder="–ê—Ä—Ç–∏–∫—É–ª">
          </div>
          <div class="form-group">
            <label class="label">–®—Ç—Ä–∏—Ö–∫–æ–¥</label>
            <input type="text" id="editProductBarcode" class="input" placeholder="–®—Ç—Ä–∏—Ö–∫–æ–¥">
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="label">–°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å</label>
            <input type="number" id="editProductPurchase" class="input" placeholder="0" min="0" step="0.01">
          </div>
          <div class="form-group">
            <label class="label">–¶–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏ *</label>
            <input type="number" id="editProductSale" class="input" placeholder="0" min="0" step="0.01">
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="label">–ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è</label>
            <input type="text" id="editProductUnit" class="input" placeholder="—à—Ç">
          </div>
          <div class="form-group">
            <label class="label">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</label>
            <input type="text" id="editProductComment" class="input" placeholder="–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ">
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" onclick="closeModal('editProductModal')">–û—Ç–º–µ–Ω–∞</button>
        <button class="btn-primary" onclick="saveEditProduct()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </div>
  </div>

<!-- BARCODE SCANNER MODAL -->
<div id="barcodeScannerModal" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.95);z-index:10000;backdrop-filter:blur(8px);">
  <div style="width:100%;height:100%;display:flex;flex-direction:column;">
    <div style="padding:20px;display:flex;justify-content:space-between;align-items:center;background:rgba(0,0,0,0.3);border-bottom:1px solid rgba(255,255,255,0.1);">
      <div style="color:#fff;font-size:18px;font-weight:600;">–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —à—Ç—Ä–∏—Ö–∫–æ–¥–∞</div>
      <button onclick="closeBarcodeScanner()" style="width:44px;height:44px;background:rgba(255,255,255,0.1);border:1px solid rgba(255,255,255,0.2);border-radius:50%;color:#fff;font-size:28px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all 0.2s;">√ó</button>
    </div>
    <div style="flex:1;display:flex;align-items:center;justify-content:center;padding:20px;position:relative;overflow:hidden;">
      <div id="barcodeScannerViewport" style="width:100%;max-width:500px;aspect-ratio:4/3;position:relative;border-radius:16px;overflow:hidden;">
        <video id="barcodeScannerVideo" style="width:100%;height:100%;object-fit:cover;"></video>
        <canvas id="barcodeScannerCanvas" style="position:absolute;top:0;left:0;width:100%;height:100%;"></canvas>
        <div style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:80%;max-width:400px;height:200px;border:3px solid #3b82f6;border-radius:16px;box-shadow:0 0 0 4000px rgba(0,0,0,0.5),inset 0 0 40px rgba(59,130,246,0.3);pointer-events:none;">
          <div style="position:absolute;top:-2px;left:-2px;width:30px;height:30px;border-top:5px solid #3b82f6;border-left:5px solid #3b82f6;border-radius:8px 0 0 0;"></div>
          <div style="position:absolute;top:-2px;right:-2px;width:30px;height:30px;border-top:5px solid #3b82f6;border-right:5px solid #3b82f6;border-radius:0 8px 0 0;"></div>
          <div style="position:absolute;bottom:-2px;left:-2px;width:30px;height:30px;border-bottom:5px solid #3b82f6;border-left:5px solid #3b82f6;border-radius:0 0 0 8px;"></div>
          <div style="position:absolute;bottom:-2px;right:-2px;width:30px;height:30px;border-bottom:5px solid #3b82f6;border-right:5px solid #3b82f6;border-radius:0 0 8px 0;"></div>
        </div>
      </div>
    </div>
    <div style="padding:20px;text-align:center;color:rgba(255,255,255,0.7);font-size:14px;font-weight:500;">–ù–∞–≤–µ–¥–∏—Ç–µ –∫–∞–º–µ—Ä—É –Ω–∞ —à—Ç—Ä–∏—Ö–∫–æ–¥</div>
  </div>
</div>

<script>
// BARCODE SCANNER
let quaggaInstance = null;

// Mobile Navigation Sync
document.addEventListener('DOMContentLoaded', function() {
  // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –º–µ–Ω—é —Å desktop –º–µ–Ω—é
  const observer = new MutationObserver(function(mutations) {
    mutations.forEach(function(mutation) {
      if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
        const target = mutation.target;
        if (target.classList.contains('nav-item') && target.classList.contains('active')) {
          const section = target.dataset.section;
          updateMobileNavigation(section);
        }
      }
    });
  });
  
  // –ù–∞–±–ª—é–¥–∞–µ–º –∑–∞ –≤—Å–µ–º–∏ –∫–Ω–æ–ø–∫–∞–º–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
  document.querySelectorAll('.nav-item').forEach(item => {
    observer.observe(item, { attributes: true });
  });
});

function updateMobileNavigation(section) {
  // –û–±–Ω–æ–≤–ª—è–µ–º –º–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é
  const mobileItems = document.querySelectorAll('.mobile-nav-item');
  mobileItems.forEach(item => {
    if (item.dataset.section === section) {
      item.classList.add('active');
    } else {
      item.classList.remove('active');
    }
  });
}

window.openBarcodeScanner = function() {
  const modal = document.getElementById('barcodeScannerModal');
  if (!modal) return;
  modal.style.display = 'block';
  document.body.style.overflow = 'hidden';
  setTimeout(() => initQuagga(), 100);
};

window.closeBarcodeScanner = function() {
  stopQuagga();
  const modal = document.getElementById('barcodeScannerModal');
  if (modal) modal.style.display = 'none';
  document.body.style.overflow = '';
};

function initQuagga() {
  if (quaggaInstance) stopQuagga();
  Quagga.init({
    inputStream: {
      name: "Live",
      type: "LiveStream",
      target: document.querySelector('#barcodeScannerViewport'),
      constraints: {
        width: { min: 640, ideal: 1280 },
        height: { min: 480, ideal: 720 },
        facingMode: "environment",
        aspectRatio: { min: 1, max: 2 }
      }
    },
    decoder: {
      readers: ["ean_reader", "ean_8_reader", "code_128_reader", "code_39_reader", "code_93_reader", "upc_reader", "upc_e_reader", "i2of5_reader", "codabar_reader"],
      multiple: false
    },
    locator: { patchSize: "medium", halfSample: true },
    numOfWorkers: navigator.hardwareConcurrency || 4,
    frequency: 10,
    locate: true
  }, function(err) {
    if (err) {
      console.error('Quagga init error:', err);
      alert('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–∞–º–µ—Ä—É. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è.');
      closeBarcodeScanner();
      return;
    }
    Quagga.start();
    quaggaInstance = true;
  });
  Quagga.onDetected(onBarcodeDetected);
}

function stopQuagga() {
  if (quaggaInstance) {
    Quagga.offDetected(onBarcodeDetected);
    Quagga.stop();
    quaggaInstance = null;
  }
}

function onBarcodeDetected(result) {
  if (!result || !result.codeResult || !result.codeResult.code) return;
  const barcode = result.codeResult.code;
  if (navigator.vibrate) navigator.vibrate(200);
  try {
    const audio = new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIGGS46+mjUBELTKXh8bllHw==');
    audio.play().catch(() => {});
  } catch(e) {}
  addProductByBarcode(barcode);
  setTimeout(() => closeBarcodeScanner(), 300);
}

function addProductByBarcode(barcode) {
  const product = PRODUCTS_CACHE.find(p => p.barcode === barcode);
  if (product) {
    addToCart(product.id);
    showToast('‚úì –¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω: ' + product.name);
  } else {
    const input = document.getElementById('barcodeInput');
    if (input) {
      input.value = barcode;
      input.dispatchEvent(new Event('input', { bubbles: true }));
      input.focus();
    }
    showToast('‚ö† –¢–æ–≤–∞—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω. –®—Ç—Ä–∏—Ö–∫–æ–¥: ' + barcode);
  }
}

// Mobile Drawer Menu Functions
function openMobileDrawer() {
  const drawer = document.getElementById('mobileDrawer');
  const overlay = document.getElementById('mobileDrawerOverlay');
  if (drawer && overlay) {
    drawer.classList.add('active');
    overlay.classList.add('active');
    document.body.style.overflow = 'hidden';
  }
}

function closeMobileDrawer() {
  const drawer = document.getElementById('mobileDrawer');
  const overlay = document.getElementById('mobileDrawerOverlay');
  if (drawer && overlay) {
    drawer.classList.remove('active');
    overlay.classList.remove('active');
    document.body.style.overflow = '';
  }
}

function showToast(message) {
  const toast = document.createElement('div');
  toast.textContent = message;
  toast.style.cssText = 'position:fixed;top:80px;left:50%;transform:translateX(-50%);background:rgba(0,0,0,0.9);color:#fff;padding:14px 24px;border-radius:12px;font-size:14px;font-weight:500;z-index:10001;box-shadow:0 10px 15px -3px rgba(0,0,0,0.1);opacity:0;transition:all 0.3s;';
  document.body.appendChild(toast);
  setTimeout(() => toast.style.opacity = '1', 10);
  setTimeout(() => {
    toast.style.opacity = '0';
    setTimeout(() => toast.remove(), 300);
  }, 2500);
}
</script>

<!-- MOBILE BOTTOM NAVIGATION -->
<nav class="mobile-bottom-nav" id="mobileBottomNav">
  <button class="mobile-nav-item active" data-section="trading" onclick="showSection('trading')">
    <svg class="mobile-nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/>
      <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
    </svg>
    <span class="mobile-nav-label">–¢–æ—Ä–≥–æ–≤–ª—è</span>
  </button>
  
  <button class="mobile-nav-item" data-section="products" onclick="showSection('products')">
    <svg class="mobile-nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
    </svg>
    <span class="mobile-nav-label">–°–∫–ª–∞–¥</span>
  </button>
  
  <button class="mobile-nav-item" data-section="expenses" onclick="showSection('expenses')">
    <svg class="mobile-nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
    </svg>
    <span class="mobile-nav-label">–†–∞—Å—Ö–æ–¥—ã</span>
  </button>
  
  <button class="mobile-nav-item" data-section="money" onclick="showSection('money')">
    <svg class="mobile-nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <rect x="1" y="4" width="22" height="16" rx="2" ry="2"/><line x1="1" y1="10" x2="23" y2="10"/>
    </svg>
    <span class="mobile-nav-label">–î–µ–Ω—å–≥–∏</span>
  </button>
  
  <button class="mobile-nav-item" data-section="reports" onclick="showSection('reports')">
    <svg class="mobile-nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/>
      <line x1="6" y1="20" x2="6" y2="14"/>
    </svg>
    <span class="mobile-nav-label">–û—Ç—á—ë—Ç—ã</span>
  </button>
</nav>

<!-- MOBILE DRAWER MENU (–ï—â—ë) -->
<div class="mobile-drawer-overlay" id="mobileDrawerOverlay" onclick="closeMobileDrawer()"></div>
<div class="mobile-drawer" id="mobileDrawer">
  <div class="mobile-drawer-header">
    <h3 class="mobile-drawer-title">–ú–µ–Ω—é</h3>
    <button class="mobile-drawer-close" onclick="closeMobileDrawer()">√ó</button>
  </div>
  <div class="mobile-drawer-content">
    <button class="mobile-drawer-item" data-section="clients" onclick="showSection('clients'); closeMobileDrawer();">
      <svg class="mobile-drawer-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
        <circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
        <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
      </svg>
      <span>–ö–ª–∏–µ–Ω—Ç—ã</span>
    </button>
    <button class="mobile-drawer-item" data-section="suppliers" onclick="showSection('suppliers'); closeMobileDrawer();">
      <svg class="mobile-drawer-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <rect x="1" y="3" width="15" height="13"/><polygon points="16 8 20 8 23 11 23 16 16 16 16 8"/>
        <circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/>
      </svg>
      <span>–ü–æ—Å—Ç–∞–≤—â–∏–∫–∏</span>
    </button>
    <button class="mobile-drawer-item" data-section="settings" onclick="showSection('settings'); closeMobileDrawer();">
      <svg class="mobile-drawer-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="3"/>
        <path d="M12 1v6m0 6v6M5.64 5.64l4.24 4.24m4.24 4.24l4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m4.24-4.24l4.24-4.24"/>
      </svg>
      <span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
    </button>
  </div>
</div>

<!-- MOBILE MENU BUTTON (–ï—â—ë) -->
<button class="mobile-menu-btn" id="mobileMenuBtn" onclick="openMobileDrawer()">
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
    <circle cx="12" cy="12" r="1"/><circle cx="19" cy="12" r="1"/><circle cx="5" cy="12" r="1"/>
  </svg>
</button>

</body>
</html>
